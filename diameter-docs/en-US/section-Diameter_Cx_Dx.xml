<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookV4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Diameter_User_Guide.ent">
%BOOK_ENTITIES;]>
<section id="dcd-Diameter_Cx_Dx">
  <title>Mobicents Diameter Cx/Dx</title>
  <para>The Cx and Dx interfaces are the reference points for interactions between the following servers:</para>
  <itemizedlist>
    <listitem>
      <para>Home Subscriber Server (HSS) </para>
    </listitem>
    <listitem>
      <para>Interrogating Call Session Control Function (I-CSCF) and Serving Call Session Control Function (S-CSCF)</para>
    </listitem>
  </itemizedlist>
  <para>The standard interface is described in the 3GPP Specifications  <ulink url="http://www.3gpp.org/ftp/Specs/html-info/29328.htm">TS29.228</ulink> and <ulink url="http://www.3gpp.org/ftp/Specs/html-info/29329.htm">TS29.229</ulink>.  </para>
  <para>A Serving-CSCF (S-CSCF) is the central node of the signalling plane. It is a SIP server, but performs session control too. It is always located in the home network. It uses Diameter Cx and Dx interfaces to the HSS to download and upload user profiles â€” it has no local storage of the user. All necessary information is loaded from the HSS.</para>
  <itemizedlist>
    <listitem>
      <para>It handles SIP registrations, which allows it to bind the user location (e.g. the IP address of the terminal) and the SIP address</para>
    </listitem>
    <listitem>
      <para>It sits on the path of all signaling messages, and can inspect every message</para>
    </listitem>
    <listitem>
      <para>It decides to which application server(s) the SIP message will be forwarded, in order to provide their services</para>
    </listitem>
    <listitem>
      <para>It provides routing services, typically using Electronic Numbering (ENUM) lookups</para>
    </listitem>
    <listitem>
      <para>It enforces the policy of the network operator</para>
    </listitem>
  </itemizedlist>
  <para>There can be multiple S-CSCFs in the network for load distribution and high availability reasons. It&apos;s the HSS that assigns the S-CSCF to a user, when it&apos;s queried by the I-CSCF.</para>
  <para>An Interrogating-CSCF (I-CSCF) is another SIP function located at the edge of an administrative domain. Its IP address is published in the Domain Name System (DNS) of the domain, so that remote servers can find it, and use it as a forwarding point (e.g. registering) for SIP packets to this domain. The I-CSCF queries the HSS using the Diameter Cx interface to retrieve the user location (the Dx interface is used from I-CSCF to SLF to locate the needed HSS only), and then routes the SIP request to its assigned S-CSCF.</para>
  <para>  The Cx and Dx interfaces provide a number of message commands that can be used within the application.</para>
  <table frame="all" pgwide="1">
    <title>Diameter Cx and Dx Messages</title>
    <tgroup cols="5" colsep="1">
      <colspec colname="c1"/>
      <colspec colname="c2"/>
      <colspec colname="c3"/>
      <colspec colname="c4"/>
      <colspec colname="c5"/>
      <thead>
        <row>
          <entry>Command Name</entry>
          <entry>Abbreviation</entry>
          <entry>Code</entry>
          <entry>Source</entry>
          <entry>Destination</entry>
        </row>
      </thead>
      <tbody>
        <row>
          <entry>User-Authorization-Request</entry>
          <entry>UAR</entry>
          <entry>300</entry>
          <entry>I-CSCF</entry>
          <entry>HSS</entry>
        </row>
        <row>
          <entry>User-Authorization-Answer</entry>
          <entry>UAA</entry>
          <entry>300</entry>
          <entry>HSS</entry>
          <entry>I-CSCF</entry>
        </row>
        <row>
          <entry>Server-Assignment-Request</entry>
          <entry>SAR</entry>
          <entry>301</entry>
          <entry>S-CSCF</entry>
          <entry>HSS</entry>
        </row>
        <row>
          <entry>Server-Assignment-Answer</entry>
          <entry>SAA </entry>
          <entry>301</entry>
          <entry>HSS</entry>
          <entry>S-CSCF</entry>
        </row>
        <row>
          <entry>Location-Info-Request</entry>
          <entry>LIR</entry>
          <entry>302</entry>
          <entry>I-CSCF</entry>
          <entry>HSS</entry>
        </row>
        <row>
          <entry>Location-Info-Answer</entry>
          <entry>LIA</entry>
          <entry>302</entry>
          <entry>HSS</entry>
          <entry>I-CSCF</entry>
        </row>
        <row>
          <entry>Multimedia-Auth-Request</entry>
          <entry>MAR</entry>
          <entry>303</entry>
          <entry>S-CSCF</entry>
          <entry>HSS</entry>
        </row>
        <row>
          <entry>Multimedia-Auth-Answer</entry>
          <entry>MAA</entry>
          <entry>303</entry>
          <entry>HSS</entry>
          <entry>S-CSCF</entry>
        </row>
        <row>
          <entry>Registration-Termination-Request</entry>
          <entry>RTR</entry>
          <entry>304</entry>
          <entry>HSS</entry>
          <entry>S-CSCF</entry>
        </row>
        <row>
          <entry>Registration-Termination-Answer</entry>
          <entry>RTA</entry>
          <entry>304</entry>
          <entry>S-CSCF</entry>
          <entry>HSS</entry>
        </row>
        <row>
          <entry>Push-Profile-Request</entry>
          <entry>PPR</entry>
          <entry>305</entry>
          <entry>HSS</entry>
          <entry>S-CSCF</entry>
        </row>
        <row>
          <entry>Push-Profile-Answer</entry>
          <entry>PPA</entry>
          <entry>303</entry>
          <entry>S-CSCF</entry>
          <entry>HSS</entry>
        </row>
      </tbody>
    </tgroup>
  </table>
<!--TODO:  Editor: paragraphs need rework.  Copied directly from wiki.
Content: Hmm we dont have wiki for that.-->  <para>The Cx and Dx interfaces definition are mixed. This is because  both are meant to standardize communication between SIP IMS Proxies and HSS</para>
  <para>UAR/UAA perform the following operations:</para>
  <itemizedlist>
    <listitem>
      <para>authorize the registration of the Public User Identity, checking multimedia subsystem access permissions and roaming agreements.
</para>
    </listitem>
    <listitem>
      <para>perform a first security check, determining whether the Public User Identity in the message is associated with the Private User Identity sent in the message.
</para>
    </listitem>
    <listitem>
      <para>obtain either the S-CSCF where the Public User Identity is registered or unregistered (i.e. registered as a consequence of a terminating call or there is a S-CSCF keeping the user profile stored), or the list of capabilities that the S-CSCF has to support.
</para>
    </listitem>
  </itemizedlist>
  <para>SAR/SAA  perform the following operations:</para>
  <itemizedlist>
    <listitem>
      <para>assign an S-CSCF to a Public Identity, or  clear the name of the S-CSCF assigned to one or more Public Identities.
</para>
    </listitem>
    <listitem>
      <para>download from HSS the relevant user information for the S-CSCF.</para>
    </listitem>
    <listitem>
      <para>backup and retrieve the S-CSCF Restoration Information (see 3GPP TS 23.380 [19]) in the HSS.</para>
    </listitem>
  </itemizedlist>
  <para>LIR/LIA perform the following operations:</para>
  <itemizedlist>
    <listitem>
      <para>obtain the name of the S-CSCF assigned to a Public Identity</para>
    </listitem>
    <listitem>
      <para>obtain the name of the AS hosting a PSI for direct routing.</para>
    </listitem>
  </itemizedlist>
  <para>RTR/RTA perform the following operation:</para>
  <itemizedlist>
    <listitem>
      <para>notify the server that the public identity is to be unregistered -allow S-CSCF to clean state.</para>
    </listitem>
  </itemizedlist>
  <para>PPR/PPA perform the following operations:</para>
  <itemizedlist>
    <listitem>
      <para>update user profile</para>
    </listitem>
    <listitem>
      <para>update charging information</para>
    </listitem>
    <listitem>
      <para>update SIP Digest information</para>
    </listitem>
  </itemizedlist>
  <para>Cx/Dx interface depends on following resources:</para>
  <itemizedlist>
    <listitem>
      <para>MUX</para>
    </listitem>
    <listitem>
      <para>Base RA</para>
    </listitem>
    <listitem>
      <para>Ro RA</para>
    </listitem>
    <listitem>
      <para>Sh Client RA</para>
    </listitem>
  </itemizedlist>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="section-Diameter_Cx_Dx_Configuration.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="section-Diameter_Cx_Dx_Resource_Adapter_Type.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="section-Diameter_Cx_Dx_API_Usage_Examples.xml" encoding="UTF-8"/>
  <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="section-Diameter_Cx_Dx_Examples.xml" encoding="UTF-8"/>
</section>
