<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "docbookV4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Diameter_User_Guide.ent">
%BOOK_ENTITIES;]>
<section id="dssrat-Diamter_Sh_Server_Resource_Adapter_Type">
  <title>Resource Adapter Type</title>
  <para>The resource adapter  provides the following types:</para>
  <itemizedlist>
    <listitem>
      <para>Activities</para>
    </listitem>
    <listitem>
      <para>Provider</para>
    </listitem>
    <listitem>
      <para>Message Factory</para>
    </listitem>
  </itemizedlist>
  <formalpara>
    <title>Activities</title>
    <para>The following activities are available, with the API definition listed for reference.  The API defines methods to create requests, send and receive answers for a certain activity, and retrieve session-specific data.  </para>
  </formalpara>
  <para>The life cycle of an activity depends on the type of received request and the application interaction.  In the case of a subscription activity, the activity  timeout is taken into consideration because the subscription may be time-based.  </para>
  <para>The activities allow the Sh (Server) application to retrieve messages and AVP factories bound to the current session.  The functionality offered is limited only  by the implementation used. </para>
  <variablelist>
    <title>Diameter Sh (Server) Activities</title>
    <varlistentry>
      <term>ShServerActivity</term>
      <listitem>
        <para>This is the base activity for the Sh server side. It is created for event based interaction, such as UDRs or PURs. The activity is created automatically when a UDR or PUR request is received, and ends when an answer is sent back to the client.</para>
      </listitem>
    </varlistentry>
  </variablelist>
  <programlisting role="JAVA">TODO: Program listing is over 100 lines
</programlisting>
  <variablelist>
    <varlistentry>
      <term>ShServerSubscriptionActivity</term>
      <listitem>
        <para>The Subscription activity is created when the client desires to subscribe to changes to the profile data. Once the initial SNR is received, SLEE creates a subscription activity. This remains in place until a termination subscription request is received or the subscription times out.</para>
      </listitem>
    </varlistentry>
  </variablelist>
  <programlisting role="JAVA">TODO: Program listing is over 100 lines
</programlisting>
  <formalpara>
    <title>Provider</title>
    <para><!--Note: Developer: What does the Provider do? If there is a description of Message Factory, there needs to be one for Provider as well.
Content: Desc present.-->The Sh (Server) provider allows SBBs to retrieve AVP and message factories.   In addition, connection information about connected peers is also  available.</para>
  </formalpara>
  <para>The API for the ShServerProvider is more than 100 lines, and therefore can not be  included directly for reference.  To view the API, refer to <ulink url="http://code.google.com/p/mobicents/source/browse/trunk/servers/diameter/resources/sh-server/ratype/src/main/java/net/java/slee/resource/diameter/sh/server/ShServerProvider.java">ShServerProvider.java in the source code</ulink></para>
  <formalpara>
    <title>Message Factory</title>
    <para>The Message Factory creates events  that can be executed within the JAIN SLEE Server.  Depending on the situation, Message Factory completes some AVPs for the session using the information made available to it.</para>
  </formalpara>
  <para>The API for the DiameterMessageFactory is more than 300 lines, and therefore can not be  included directly for reference.  To view the API, refer to <ulink url="http://code.google.com/p/mobicents/source/browse/trunk/servers/diameter/resources/sh-server/ratype/src/main/java/net/java/slee/resource/diameter/sh/server/ShServerMessageFactory.java">ShServerMessageFactory.java in the source code</ulink>.</para>
</section>
